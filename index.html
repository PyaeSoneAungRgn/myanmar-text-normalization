<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Myanmar Text Normalization</title>

    <style>
        @font-face {
            font-family: 'Yati';
            src: url('https://res.cloudinary.com/pyaesoneaung/raw/upload/v1687076669/yati.ttf');
        }

        * {
            font-family: Yati;
        }
    </style>

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.2/dist/cdn.min.js"></script>

    <script src="https://unpkg.com/tailwindcss-jit-cdn"></script>
    <script type="tailwind-config">
        {
            theme: {
                extend: {
                },
            },
            plugins: [
                require('@tailwindcss/forms')
            ],
        }
    </script>
</head>

<body>
    <div class="relative min-h-screen overflow-hidden bg-gray-50 px-6 md:px-0 py-12">
        <img src="https://play.tailwindcss.com/img/beams.jpg" alt=""
            class="absolute left-1/2 top-1/2 max-w-none -translate-x-1/2 -translate-y-1/2" width="1308" />
        <div
            class="absolute inset-0 bg-[url(https://play.tailwindcss.com/img/grid.svg)] bg-center [mask-image:linear-gradient(180deg,white,rgba(255,255,255,0))]">
        </div>
        <h1 class="relative w-full text-center text-3xl font-light">Myanmar Text Normalization</h1>
        <div x-data="{ text: '' }" class="relative h-full md:flex flex-wrap justify-around mt-12">
            <div class="w-full md:w-5/12">
                <p class="font-extralight">Original</p>
                <textarea x-model="text" rows="10"
                    class="w-full mt-1 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-300 sm:text-sm sm:leading-6 resize-none"></textarea>
            </div>
            <div class="w-full md:w-5/12">
                <p class="font-extralight">Normalize</p>
                <textarea x-text="normalize(text)" rows="10"
                    class="w-full mt-1 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-300 sm:text-sm sm:leading-6 resize-none cursor-not-allowed bg-gray-50"
                    disabled></textarea>
            </div>
        </div>
        <div class="text-sm relative mt-20 md:mt-0 md:absolute inset-x-0 bottom-0 mb-6 text-center font-thin">
            <p>Normalization Rules: <a class="text-blue-700"
                    href="https://github.com/ayehninnkhine/MMStringNormalizer">ayehninnkhine/MMStringNormalizer</a>
            </p>
            <p class="pt-2">Source Code: <a class="text-blue-700"
                    href="https://github.com/PyaeSoneAungRgn/vscode-myanmar-text-normalization">PyaeSoneAungRgn/vscode-myanmar-text-normalization</a>
        </div>
    </div>

    <script>
        function normalize(input) {
            var rules = [{
                "from": "([\u102B-\u1035])([\u103B-\u103E])",
                "to": "$2$1"
            },
            {
                "from": "\u1036\u102F",
                "to": "\u102F\u1036"
            },
            {
                "from": "([\u1000-\u1020])(\u103D)(\u1031)(\u103E)",
                "to": "$1$2$4$3"
            },
            {
                "from": "(\u103A)(\u1037)",
                "to": "$2$1"
            },
            {
                "from": "(\u1036)(\u102F)",
                "to": "$2$1"
            },
            {
                "from": "\u103E\u103B",
                "to": "\u103B\u103E"
            },
            {
                "from": "\u1037\u102C",
                "to": "\u102C\u1037"
            },
            {
                "from": "(\u102B)+",
                "to": "\u102B"
            },
            {
                "from": "(\u102C)+",
                "to": "\u102C"
            },
            {
                "from": "(\u102D)+",
                "to": "\u102D"
            },
            {
                "from": "(\u102E)+",
                "to": "\u102E"
            },
            {
                "from": "(\u102F)+",
                "to": "\u102F"
            },
            {
                "from": "(\u1030)+",
                "to": "\u1030"
            },
            {
                "from": "(\u1031)+",
                "to": "\u1031"
            },
            {
                "from": "(\u1032)+",
                "to": "\u1032"
            },
            {
                "from": "(\u1033)+",
                "to": "\u1033"
            },
            {
                "from": "(\u1034)+",
                "to": "\u1034"
            },
            {
                "from": "(\u1035)+",
                "to": "\u1035"
            },
            {
                "from": "(\u1036)+",
                "to": "\u1036"
            },
            {
                "from": "(\u1037)+",
                "to": "\u1037"
            },
            {
                "from": "(\u1038)+",
                "to": "\u1038"
            },
            {
                "from": "(\u1039)+",
                "to": "\u1039"
            },
            {
                "from": "(\u103A)+",
                "to": "\u103A"
            },
            {
                "from": "(\u103B)+",
                "to": "\u103B"
            },
            {
                "from": "(\u103C)+",
                "to": "\u103C"
            },
            {
                "from": "(\u103D)+",
                "to": "\u103D"
            },
            {
                "from": "(\u103E)+",
                "to": "\u103E"
            },
            {
                "from": "(\u103F)+",
                "to": "\u103F"
            },
            {
                "from": "(\u102F\u1036)+",
                "to": "\u102F\u1036"
            },
            {
                "from": "(\u102D\u102F)+",
                "to": "\u102D\u102F"
            },
            {
                "from": "([\u1000-\u1021])(\u102F)(\u102D)",
                "to": "$1$3$2"
            },
            {
                "from": "([\u1000-\u1021])(\u1030)(\u102D)",
                "to": "$1$3\u102F"
            },
            {
                "from": "\u102F\u102E",
                "to": "\u102E\u102F"
            },
            {
                "from": "([\u1000-\u1020])(\u103E)(\u1031)(\u103B)",
                "to": "$1$4$2$3"
            },
            {
                "from": "\u1040\u102D(?!\u0020?/)",
                "to": "\u101D\u102D"
            },
            {
                "from": "([^\u1040-\u1049])\u1040([^\u1040-\u1049\u0020]|[\u104a\u104b])",
                "to": "$1\u101D$2"
            },
            {
                "from": "(\u1040)([\u102B-\u1032])",
                "to": "\u101D$2"
            },
            {
                "from": "(\u1040)(\u1036)",
                "to": "\u101D$2"
            },
            {
                "from": "(\u1040)(\u103A)",
                "to": "\u101D$2"
            },
            {
                "from": "(\u1040)(\u103E)",
                "to": "\u101D$2"
            },
            {
                "from": "(\u1047)( ? = [\u1000 - \u101C\u101E - \u102A\u102C\u102E - \u103F\u104C - \u109F\u0020])",
                "to": "\u101B"
            },
            {
                "from": "\u1031\u1047",
                "to": "\u1031\u101B"
            },
            {
                "from": "([\u1000-\u1021])(\u1036)(\u103D)(\u1037)",
                "to": "$1$3$2$4"
            },
            {
                "from": "([\u1000-\u1021])(\u102D)(\u1039)([\u1000-\u1021])",
                "to": "$1$3$4$2"
            },
            {
                "from": "([\u1000-\u1021])(\u1036)(\u103E)",
                "to": "$1$3$2"
            },
            {
                "from": "\u1037\u102F",
                "to": "\u102F\u1037"
            },
            {
                "from": "\u1036\u103D",
                "to": "\u103D\u1036"
            },
            {
                "from": "(\u1004)(\u1031)(\u103A)(\u1039)([\u1000-\u1021])",
                "to": "$1$3$4$5$2"
            },
            {
                "from": "(\u102D)(\u103A)+",
                "to": "$1"
            },
            {
                "from": "\u1025\u103A",
                "to": "\u1009\u103A"
            },
            {
                "from": "\u200B",
                "to": ""
            },
            {
                "from": "\u200C",
                "to": ""
            },
            {
                "from": "\u202C",
                "to": ""
            },
            {
                "from": "\u00A0",
                "to": ""
            },
            {
                "from": "([\u1000-\u1021])(\u1031)(\u103D)",
                "to": "$1$3$2"
            },
            {
                "from": "([\u1000-\u1021])(\u1031)(\u103E)(\u103B)",
                "to": "$1$3$4$2"
            }
            ];

            for (i = 0; i < rules.length; i++) {
                var rule = rules[i];
                var from = rule["from"];
                var to = rule["to"];
                var from_regex = new RegExp(from, "g");
                input = input.replace(from_regex, to);
            }

            return input;
        }
    </script>
</body>

</html>